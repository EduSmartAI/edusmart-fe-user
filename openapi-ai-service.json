{
  "swagger": "2.0",
  "info": {
    "title": "AI Service Swagger",
    "version": "v1"
  },
  "basePath": "/ai",
  "paths": {
    "/api/AIChatBots": {
      "post": {
        "tags": [
          "AIChatBots"
        ],
        "consumes": [
          "application/json",
          "text/json",
          "application/*+json"
        ],
        "produces": [
          "text/plain",
          "application/json",
          "text/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/AIChatBotRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/AIChatBotResponse"
            }
          }
        }
      }
    },
    "/api/AiQuizEvaluate/evaluate": {
      "post": {
        "tags": [
          "AiQuizEvaluate"
        ],
        "consumes": [
          "application/json",
          "text/json",
          "application/*+json"
        ],
        "produces": [
          "text/plain",
          "application/json",
          "text/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/QuizEvaluableCreatedEvent"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/QuizEvaluateResponse"
            }
          }
        }
      }
    },
    "/api/v1/AiRecommend": {
      "post": {
        "tags": [
          "AiRecommend"
        ],
        "consumes": [
          "application/json",
          "text/json",
          "application/*+json"
        ],
        "produces": [
          "text/plain",
          "application/json",
          "text/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/AiEvaluateTempRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/AiEvaluateResponse"
            }
          }
        }
      }
    },
    "/api/v1/AiRecommend/external-courses": {
      "post": {
        "tags": [
          "AiRecommend"
        ],
        "consumes": [
          "application/json",
          "text/json",
          "application/*+json"
        ],
        "produces": [
          "text/plain",
          "application/json",
          "text/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/AiExternalCourseRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/AiExternalCourseResponse"
            }
          }
        }
      }
    },
    "/api/v1/AiRecommend/improvement-search-ai": {
      "post": {
        "tags": [
          "AiRecommend"
        ],
        "consumes": [
          "application/json",
          "text/json",
          "application/*+json"
        ],
        "produces": [
          "text/plain",
          "application/json",
          "text/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/AiSearchRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/AiSearchResponse"
            }
          }
        }
      }
    },
    "/api/AiTranscript": {
      "post": {
        "tags": [
          "AiTranscript"
        ],
        "consumes": [
          "application/json",
          "text/json",
          "application/*+json"
        ],
        "produces": [
          "text/plain",
          "application/json",
          "text/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/CreateTranscriptCommand"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/CreateTranscriptResponse"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "AIChatBotRequest": {
      "type": "object",
      "properties": {
        "request": {
          "$ref": "#/definitions/ChatRequestDto"
        }
      },
      "additionalProperties": false
    },
    "AIChatBotResponse": {
      "type": "object",
      "properties": {
        "success": {
          "type": "boolean"
        },
        "messageId": {
          "type": "string"
        },
        "message": {
          "type": "string"
        },
        "detailErrors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/DetailError"
          }
        },
        "response": {
          "$ref": "#/definitions/ChatResponseDto"
        }
      },
      "additionalProperties": false
    },
    "AiEvaluateResponse": {
      "type": "object",
      "properties": {
        "success": {
          "type": "boolean"
        },
        "messageId": {
          "type": "string"
        },
        "message": {
          "type": "string"
        },
        "detailErrors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/DetailError"
          }
        },
        "response": {
          "$ref": "#/definitions/EvaluateResult"
        },
        "learningPathId": {
          "format": "uuid",
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "AiEvaluateTempRequest": {
      "type": "object",
      "properties": {
        "careerGoal": {
          "type": "string"
        },
        "knownFrameworks": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "knownLanguages": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "externalLimitTime": {
          "type": "string"
        },
        "kRetrieval": {
          "format": "int32",
          "type": "integer"
        },
        "scoreThreshold": {
          "format": "int32",
          "type": "integer"
        },
        "identityEntity": {
          "$ref": "#/definitions/IdentityEntity"
        },
        "learningPathId": {
          "format": "uuid",
          "type": "string"
        },
        "semesterId": {
          "format": "uuid",
          "type": "string"
        },
        "studentLevel": {
          "format": "int32",
          "type": "integer"
        }
      },
      "additionalProperties": false
    },
    "AiEvaluationDto": {
      "type": "object",
      "properties": {
        "score100": {
          "format": "int32",
          "type": "integer"
        },
        "summary": {
          "type": "string"
        },
        "strengths": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "improvements": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "actions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RecommendedAction"
          }
        },
        "skillGaps": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/SkillGap"
          }
        },
        "confidence": {
          "format": "double",
          "type": "number"
        },
        "model": {
          "type": "string"
        },
        "rubricVersion": {
          "type": "string"
        },
        "createdAtUtc": {
          "format": "date-time",
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "AiExternalCourseRequest": {
      "type": "object",
      "properties": {
        "goal_major": {
          "type": "string"
        },
        "learningPathId": {
          "type": "string"
        },
        "currentUserEmail": {
          "type": "string"
        },
        "majorCode": {
          "type": "string"
        },
        "reason": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "AiExternalCourseResponse": {
      "type": "object",
      "properties": {
        "success": {
          "type": "boolean"
        },
        "messageId": {
          "type": "string"
        },
        "message": {
          "type": "string"
        },
        "detailErrors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/DetailError"
          }
        },
        "response": {
          "$ref": "#/definitions/AskResponse"
        }
      },
      "additionalProperties": false
    },
    "AiSearchRequest": {
      "type": "object",
      "properties": {
        "topic": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "AiSearchResponse": {
      "type": "object",
      "properties": {
        "success": {
          "type": "boolean"
        },
        "messageId": {
          "type": "string"
        },
        "message": {
          "type": "string"
        },
        "detailErrors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/DetailError"
          }
        },
        "response": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "AnswerResult": {
      "type": "object",
      "properties": {
        "answerId": {
          "format": "uuid",
          "type": "string"
        },
        "answerText": {
          "type": "string"
        },
        "isCorrectAnswer": {
          "type": "boolean"
        },
        "selectedByStudent": {
          "type": "boolean"
        }
      },
      "additionalProperties": false
    },
    "AskResponse": {
      "type": "object",
      "properties": {
        "answer": {
          "type": "string"
        },
        "roadmap": {
          "$ref": "#/definitions/RoadmapPayload"
        }
      },
      "additionalProperties": false
    },
    "ChatHistoryItem": {
      "type": "object",
      "properties": {
        "role": {
          "type": "string"
        },
        "content": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "ChatRequestDto": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string"
        },
        "history": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ChatHistoryItem"
          }
        }
      },
      "additionalProperties": false
    },
    "ChatResponseDto": {
      "type": "object",
      "properties": {
        "reply": {
          "type": "string"
        },
        "rawFinishReason": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "CreateTranscriptCommand": {
      "type": "object",
      "properties": {
        "createTranscriptionReq": {
          "$ref": "#/definitions/CreateTranscriptionReq"
        }
      },
      "additionalProperties": false
    },
    "CreateTranscriptResponse": {
      "type": "object",
      "properties": {
        "success": {
          "type": "boolean"
        },
        "messageId": {
          "type": "string"
        },
        "message": {
          "type": "string"
        },
        "detailErrors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/DetailError"
          }
        },
        "response": {
          "$ref": "#/definitions/TranscriptResult"
        }
      },
      "additionalProperties": false
    },
    "CreateTranscriptionReq": {
      "type": "object",
      "properties": {
        "lessonId": {
          "type": "string"
        },
        "videoUrl": {
          "type": "string"
        },
        "language": {
          "type": "string"
        },
        "durationSec": {
          "format": "double",
          "type": "number"
        }
      },
      "additionalProperties": false
    },
    "DetailError": {
      "type": "object",
      "properties": {
        "field": {
          "type": "string"
        },
        "messageId": {
          "type": "string"
        },
        "errorMessage": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "EvaluateResult": {
      "type": "object",
      "properties": {
        "inputs": { },
        "evaluations": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/MajorEvaluation"
          }
        },
        "matched": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/MajorEvaluation"
          }
        },
        "externalSuggestions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ExternalSuggestion"
          }
        }
      },
      "additionalProperties": false
    },
    "ExternalSuggestion": {
      "type": "object",
      "properties": {
        "major_code": {
          "type": "string"
        },
        "major_name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "why_for_you": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "IdentityEntity": {
      "type": "object",
      "properties": {
        "userId": {
          "format": "uuid",
          "type": "string"
        },
        "email": {
          "type": "string"
        },
        "fullName": {
          "type": "string"
        },
        "roleName": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "MajorEvaluation": {
      "type": "object",
      "properties": {
        "major_code": {
          "type": "string"
        },
        "major_name": {
          "type": "string"
        },
        "supports": {
          "type": "boolean"
        },
        "support_score": {
          "format": "int32",
          "type": "integer"
        },
        "reasons": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "QuestionResult": {
      "type": "object",
      "properties": {
        "questionId": {
          "format": "uuid",
          "type": "string"
        },
        "questionText": {
          "type": "string"
        },
        "questionType": {
          "format": "int32",
          "type": "integer"
        },
        "explanation": {
          "type": "string"
        },
        "answers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/AnswerResult"
          }
        }
      },
      "additionalProperties": false
    },
    "QuizEvaluableCreatedEvent": {
      "type": "object",
      "properties": {
        "eventId": {
          "format": "uuid",
          "type": "string"
        },
        "attemptId": {
          "format": "uuid",
          "type": "string"
        },
        "quizId": {
          "format": "uuid",
          "type": "string"
        },
        "scope": {
          "$ref": "#/definitions/QuizScope"
        },
        "scopeId": {
          "format": "uuid",
          "type": "string"
        },
        "courseId": {
          "format": "uuid",
          "type": "string"
        },
        "userId": {
          "format": "uuid",
          "type": "string"
        },
        "totalQuestions": {
          "format": "int32",
          "type": "integer"
        },
        "totalCorrectAnswers": {
          "format": "int32",
          "type": "integer"
        },
        "score100Raw": {
          "format": "int32",
          "type": "integer"
        },
        "questions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/QuestionResult"
          }
        },
        "occurredAtUtc": {
          "format": "date-time",
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "QuizEvaluateResponse": {
      "type": "object",
      "properties": {
        "success": {
          "type": "boolean"
        },
        "messageId": {
          "type": "string"
        },
        "message": {
          "type": "string"
        },
        "detailErrors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/DetailError"
          }
        },
        "response": {
          "$ref": "#/definitions/AiEvaluationDto"
        }
      },
      "additionalProperties": false
    },
    "QuizScope": {
      "format": "int32",
      "enum": [
        1,
        2
      ],
      "type": "integer"
    },
    "RecommendedAction": {
      "type": "object",
      "properties": {
        "title": {
          "type": "string"
        },
        "kind": {
          "type": "string"
        },
        "targetUrl": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "RoadmapPayload": {
      "type": "object",
      "properties": {
        "roadmap_title": {
          "type": "string"
        },
        "steps": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RoadmapStepPayload"
          }
        }
      },
      "additionalProperties": false
    },
    "RoadmapStepPayload": {
      "type": "object",
      "properties": {
        "title": {
          "type": "string"
        },
        "duration_weeks": {
          "format": "int32",
          "type": "integer"
        },
        "objectives": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "suggested_courses": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/SuggestedCoursePayload"
          }
        }
      },
      "additionalProperties": false
    },
    "Segment": {
      "type": "object",
      "properties": {
        "start": {
          "format": "double",
          "type": "number"
        },
        "end": {
          "format": "double",
          "type": "number"
        },
        "text": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "SkillGap": {
      "type": "object",
      "properties": {
        "skillTag": {
          "type": "string"
        },
        "level": {
          "format": "int32",
          "type": "integer"
        },
        "evidence": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "SuggestedCoursePayload": {
      "type": "object",
      "properties": {
        "title": {
          "type": "string"
        },
        "link": {
          "type": "string"
        },
        "provider": {
          "type": "string"
        },
        "reason": {
          "type": "string"
        },
        "level": {
          "type": "string"
        },
        "rating": {
          "type": "string"
        },
        "est_duration_weeks": {
          "format": "int32",
          "type": "integer"
        }
      },
      "additionalProperties": false
    },
    "TranscriptResult": {
      "type": "object",
      "properties": {
        "lessonId": {
          "type": "string"
        },
        "status": {
          "type": "string"
        },
        "language": {
          "type": "string"
        },
        "text": {
          "type": "string"
        },
        "segments": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Segment"
          }
        },
        "words": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Word"
          }
        },
        "error": {
          "type": "string"
        },
        "vttUrl": {
          "type": "string"
        },
        "vttPublicId": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "Word": {
      "type": "object",
      "properties": {
        "start": {
          "format": "double",
          "type": "number"
        },
        "end": {
          "format": "double",
          "type": "number"
        },
        "text": {
          "type": "string"
        }
      },
      "additionalProperties": false
    }
  },
  "securityDefinitions": {
    "JWT_Token": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header",
      "description": "Copy this into the value field: Bearer {token}"
    }
  },
  "security": [
    {
      "JWT_Token": [ ]
    }
  ]
}